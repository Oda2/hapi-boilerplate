# Qual é a imagem base que vou utilizar
box: node:8

# Definição do primeiro step
build:
  steps:
    - script:
      name: install yarn
      code: |
        npm install -g yarn
    
    - script:
      name: set yarn cache
      code: |
        export YARN_CACHE=$WERCKER_CACHE_DIR/yarn
    
    - script:
      name: install dependencies
      code: |
        HOME=$YARN_CACHE yarn
    
    - script:
      name: build
      code: |
        npm run build

# Definição do step de testes
test:
  steps:
    - yarn-test
